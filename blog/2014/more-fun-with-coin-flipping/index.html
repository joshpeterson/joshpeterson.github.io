<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> More fun with coin flipping | Josh Peterson </title> <meta name="author" content="Josh Peterson"> <meta name="description" content="Josh's personal website "> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%91%8B&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://joshpeterson.github.io/blog/2014/more-fun-with-coin-flipping/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Josh</span> Peterson </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/philosophy/">philosophy </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/repositories/">repositories</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/publications/">publications</a> </div> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">More fun with coin flipping</h1> <p class="post-meta"> Created in January 30, 2014 </p> <p class="post-tags"> <a href="/blog/2014"> <i class="fa-solid fa-calendar fa-sm"></i> 2014 </a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>In my <a href="fun-with-coin-flipping/">last post</a> I attempted to solve three coin flipping <a href="http://cacm.acm.org/magazines/2013/11/169037-puzzled-coin-flipping/abstract" rel="external nofollow noopener" target="_blank">puzzles</a> using Monte Carlo simulation. The <a href="http://cacm.acm.org/magazines/2013/12/169936-puzzled-solutions-and-sources/abstract" rel="external nofollow noopener" target="_blank">solutions</a> to the puzzles are published, so I’ll compare my results to the correct analytic solutions.</p> <h2 id="problem-1">Problem 1</h2> <p>The first problem is:</p> <blockquote> <p>You have just joined the Coin Flippers of America, and, naturally, the amount of your annual dues will be determined by chance. First you must select a head-tail sequence of length five. A coin is then flipped (by a certified CFA official) until that sequence is achieved with five consecutive flips. Your dues is the total number of flips, in U.S. dollars; for example, if you choose HHHHH as your sequence, and it happens to take 36 flips before you get a run of five heads, your annual CFA dues will be $36. What sequence should you pick? HHHHH? HTHTH? HHHTT? Does it even matter?</p> </blockquote> <p>Although I expected the dues for any sequence to be about $32 dollars, I found that a few sequences (HHHHH and TTTTT) were much more expensive. Both of these choices lead to dues of around $62 dollars. Peter Winkler describes why this occurs in his answer:</p> <blockquote> <p>If X is the average time needed to get HHHHH starting fresh, the average of 1+X and 1 is 32. Solving for X yields a startlingly high 62 flips.</p> </blockquote> <p>So my Monte Carlo simulation correctly predicted this result.</p> <h2 id="problem-2">Problem 2</h2> <p>The second problem is:</p> <blockquote> <p>Now you have entered your first CFA tournament, facing your first opponent. Each of you will pick a different head-tail sequence of length five, and a coin will be flipped repeatedly. Whoever’s sequence arises first is the winner. You have the option of choosing first. What sequence should you pick?</p> </blockquote> <p>My simulation indicated that both HHHHH and TTTTT are poor choices winning least often because they occur least often. My simulation also indicated, rather surprisingly, that HTTTT is the best option. As it turns out, I missed a key part of the problem. Your opponent can know your chosen sequence, and choose his or her sequence accordingly. My simulation assumed your opponent had no knowledge of your choice. Winkler uses this part of the problem to propose the solution.</p> <blockquote> <p>In general, if you pick VWXYZ your opponent crushes you by picking UVWXY, with the right choice of U. If my calculations are correct, you can do no better than, say, HHTHT (one of the good choices in Puzzle 1). Even then, your opponent counters with HHHTH, winning two times out of three.</p> </blockquote> <p>I added another simulation to the utility which tests this strategy. For each possible combination you can choose, here are the results if your opponent chooses the first four flips from your sequence with a leading ‘H’ (using 10,000 iterations):</p> <center> <table class="gridtable"> <tr> <th>Sequence</th> <th>Percent of games you win</th> <th>Sequence</th> <th>Percent of games you win</th> </tr> <tr> <td>HHHHT </td> <td>50.53%</td> <td>HHTHT </td> <td>33.55%</td> </tr> <tr> <td>THTHT </td> <td>49.74%</td> <td>HHHTT </td> <td>33.39%</td> </tr> <tr> <td>THTHH </td> <td>42.56%</td> <td>HHTTT </td> <td>33.29%</td> </tr> <tr> <td>HTHHT </td> <td>41.37%</td> <td>HHTTH </td> <td>33.23%</td> </tr> <tr> <td>HTHHH </td> <td>41.36%</td> <td>HTTTT </td> <td>32.96%</td> </tr> <tr> <td>THHTH </td> <td>40.57%</td> <td>HHHTH </td> <td>32.96%</td> </tr> <tr> <td>TTTHT </td> <td>38.76%</td> <td>HHTHH </td> <td>32.8%</td> </tr> <tr> <td>TTHTH </td> <td>38.22%</td> <td>HTTTH </td> <td>32.42%</td> </tr> <tr> <td>TTHTT </td> <td>38.22%</td> <td>HTTHT </td> <td>30.99%</td> </tr> <tr> <td>TTHHT </td> <td>37.86%</td> <td>THTTH </td> <td>29.7%</td> </tr> <tr> <td>THHHH </td> <td>37.48%</td> <td>THTTT </td> <td>29.15%</td> </tr> <tr> <td>THHHT </td> <td>37.04%</td> <td>HTHTT </td> <td>26.37%</td> </tr> <tr> <td>TTTHH </td> <td>36.98%</td> <td>HTHTH </td> <td>22.73%</td> </tr> <tr> <td>HTTHH </td> <td>36.64%</td> <td>TTTTH </td> <td>6.28%</td> </tr> <tr> <td>TTHHH </td> <td>36.38%</td> <td>TTTTT </td> <td>3.13%</td> </tr> <tr> <td>THHTT </td> <td>34.19%</td> </tr> </table> </center> <p>Here are the results if your opponent chooses the first four flips from your sequence with a leading ‘T’:</p> <center> <table class="gridtable"> <tr> <th>Sequence</th> <th>Percent of games you win</th> <th>Sequence</th> <th>Percent of games you win</th> </tr> <tr> <td>TTTTH </td> <td>50.18%</td> <td>TTTHT </td> <td>34.44%</td> </tr> <tr> <td>HTHTH </td> <td>49.85%</td> <td>THHHH </td> <td>34.08%</td> </tr> <tr> <td>THTTH </td> <td>42.09%</td> <td>TTHHH </td> <td>33.49%</td> </tr> <tr> <td>THTTT </td> <td>42.0%</td> <td>TTHHT </td> <td>33.3%</td> </tr> <tr> <td>HTHTT </td> <td>41.55%</td> <td>TTHTH </td> <td>32.98%</td> </tr> <tr> <td>HTTHT </td> <td>40.25%</td> <td>TTHTT </td> <td>32.88%</td> </tr> <tr> <td>HHTTT </td> <td>38.1%</td> <td>TTTHH </td> <td>32.73%</td> </tr> <tr> <td>HHHTT </td> <td>38.04%</td> <td>THHHT </td> <td>32.36%</td> </tr> <tr> <td>HHTHH </td> <td>37.66%</td> <td>THHTH </td> <td>31.32%</td> </tr> <tr> <td>HHTHT </td> <td>37.34%</td> <td>HTHHT </td> <td>29.2%</td> </tr> <tr> <td>HTTTT </td> <td>37.04%</td> <td>HTHHH </td> <td>28.77%</td> </tr> <tr> <td>HTTTH </td> <td>36.79%</td> <td>THTHH </td> <td>26.88%</td> </tr> <tr> <td>HHHTH </td> <td>36.73%</td> <td>THTHT </td> <td>22.83%</td> </tr> <tr> <td>HHTTH </td> <td>36.4%</td> <td>HHHHT </td> <td>6.05%</td> </tr> <tr> <td>THHTT </td> <td>36.21%</td> <td>HHHHH </td> <td>2.91%</td> </tr> <tr> <td>HTTHH </td> <td>35.06%</td> </tr> </table> </center> <p>Clearly, if you opponent is blindly following one or the other strategy, your best option is to choose either HHHHT or TTTTH. I suspect that your opponent will be smart enough to choose the appropriate leading flip to give you almost no chance to win in these two cases. As Winkler mentions, your best option is to choose one of the sequences in the middle, which gives the best results for both cases. He suggests HHTHT, which wins about 1 of 3 times.</p> <h2 id="problem-3">Problem 3</h2> <p>The third problem is:</p> <blockquote> <p>Following the tournament (which you win), you are offered a side bet. You pay $1 and flip a coin 100 times; if you get exactly 50 heads, you win $20 (minus your dollar). If you lose, you are out only the $1. Even so, should you take the bet?</p> </blockquote> <p>Winkler mentioned that a good estimate for flipping \(n\) heads in \(2n\) flips is</p> \[\frac{1}{\sqrt{\pi n/2}}\] <p>With \(n=50\) this expression yields about 11%. He indicates that we instead can compute the value exactly, since the number of ways to flips exactly 50 heads in 100 flips is 100 choose 50, and the total number of outcomes for 100 flips is \(2^{100}\), then the chance to getting exactly 50 heads in 100 flips is</p> \[\frac{100!/(50!)^2}{2^{100}} = 0.08\] <p>Since 8% is greater than 1/20 (5%), Winkler indicates that this is a good bet.</p> <p>My results, on the other hand, found that this bet wins only 2% of the time, meaning it is not a good bet. My utility inspects only 1000 possible \(2^{100}\)combinations of flips, so I suspect that my sample size is consistently too small. Based on the time the utility takes to run with 1000 samples, I suspect that using any reasonable number of the \(2^{100}\) samples will not be feasible. Winkler’s analytic solution is clearly correct.</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/more-fun-with-loop-unrolling-cpp/">More fun with loop unrolling - C++</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/learning-loop-unrolling/">Learning loop unrolling</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/constraints-are-liberating/">Constraints are liberating</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2022/span-making-c-arrays-fun-since-2020/">Span - making C arrays fun since 2020</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2022/game-theory-fun-in-the-nfl/">Game theory fun in the NFL</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Josh Peterson. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Last updated: March 16, 2025. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>